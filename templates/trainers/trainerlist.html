{% extends "base.html" %}
{% load bootstrap4 %}
{% load i18n %}

{% block content %}
    <h1>{% trans 'Trainer List' %}</h1>
    <div class="bg-light p-3 mb-5">
      <form method="get">
          <div class="form-row">
            {% bootstrap_field filter.name form_group_class='col-lg-5 mb-3' bound_css_class='' %}
            {% bootstrap_field filter.sport form_group_class='col-lg-3 mb-3' bound_css_class='' %}
            {% bootstrap_field filter.city form_group_class='col-lg-4 mb-3' bound_css_class='' %}
          </div>
          <div class="d-flex justify-content-end">
            <input class="btn btn-primary" type="submit" value="{% trans 'Submit' %}" />
            <a class="btn btn-secondary ml-2" href="{% url 'trainer_list' %}">{% trans 'Reset' %}</a>
          </div>
      </form>
    </div>
    <div class="d-flex justify-content-end my-2">
      <span class="mx-1">{{result_count|default:0}} {% trans 'result' %}{{ result_count|pluralize:'s' }}</span>
    </div>
    <table class="table table-striped table-bordered">
        <thead>
        <tr>
            <th>{% trans 'Name' %}</th>
            <th>{% trans 'Sport' %}</th>
            <th>{% trans 'Address' %}</th>
            <th>{% trans 'Motto' %}</th>
            <th>{% trans 'Profile' %}</th>
        </tr>
        </thead>
        {% for trainer in trainers %}
            <tr>
                <td>{{ trainer.user.first_name }} {{ trainer.user.last_name }}</td>
                <td>{{ trainer.get_sport_display }}</td>
                {% lookup locations_by_trainerid trainer.id as locs %}
                <td>
                    {% for loc in locs %}
                        <p>{{ loc.city }}, {{ loc.country }}</p>
                    {% endfor %}
                </td>
                <td>{{ trainer.motto }}</td>
                <td><a href="{% url 'trainer_profile' trainer.id %}">{% trans 'View Profile' %}</a></td>
            </tr>
        {% endfor %}
    </table>
{% endblock %}